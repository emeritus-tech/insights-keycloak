import{jsxs as p,Fragment as I,jsx as o}from"react/jsx-runtime";import{a as y,d as K,P as C,dJ as E,u as S,f as T,b as w,dK as d,g as V,w as j,F as q,y as u,A as H,j as v,l as f}from"./main-DXDh8SEc.js";import{D as O}from"./DynamicComponents-oH6U-qv7.js";import{F as k}from"./FormAccess-Bcw0IOUQ.js";import{V as x}from"./ViewHeader-DTd0a4sz.js";import{u as P}from"./useParams-5577fL9S.js";import"react";import"react-dom";import"./ClientSelect-DzH7E0lJ.js";import"./FileUpload-CK_LBb0x.js";import"./CodeEditor-BFrRAdAy.js";import"./copy-icon-C4kUIpk5.js";import"./EmptyStateFooter-C_ktbNPy.js";import"./EmptyStateActions-CiPKPOdJ.js";import"./GroupPickerDialog-B6DOUphD.js";import"./PaginatingTableToolbar-zbU1l_6-.js";import"./DataListItemRow-CavOLjhh.js";import"./FlexItem-c5qvFYFZ.js";import"./KeySelect-BIWWws15.js";import"./useToggle-K3Kx99tM.js";import"./MultiLineInput-D3_8dp6S.js";import"./AddRoleMappingModal-BqIKRo9T.js";import"./KeycloakDataTable-B3eTS_qk.js";import"./Td-BmSS9qQq.js";import"./grip-vertical-icon-CgFEKIXW.js";import"./_baseFlatten-CMLUuI8z.js";import"./ConfirmDialog-o8TAA2Kj.js";import"./filter-icon-Do5tIUfA.js";const D=({providerType:t,onClose:i})=>{const{adminClient:a}=S(),{t:r}=y(),{id:s}=P(),{addAlert:c,addError:b}=T(),h=w().componentTypes?.[d]??[],l=V({mode:"onChange"}),{handleSubmit:g,reset:A}=l,F=async e=>{e.config&&Object.entries(e.config).forEach(([n,m])=>e.config[n]=Array.isArray(m)?m:[m]);try{s?(await a.components.update({id:s},{...e,providerType:d}),c(r("saveProviderSuccess"),f.success)):(await a.components.create({...e,providerId:t,providerType:d}),c(r("saveProviderSuccess"),f.success),i?.())}catch(n){b("saveProviderError",n)}};return j(async()=>{if(s)return await a.components.findOne({id:s})},e=>{e&&A({...e})},[]),o(k,{isHorizontal:!0,role:"manage-realm",onSubmit:g(F),children:p(q,{...l,children:[s&&o(u,{name:"id",label:r("providerId"),labelIcon:r("providerIdHelp"),rules:{required:r("required")},readOnly:!0}),o(u,{name:"name",defaultValue:t,label:r("name"),labelIcon:r("keyProviderMapperNameHelp"),rules:{required:r("required")}}),o(O,{properties:h.find(e=>e.id===t)?.properties||[]}),p(H,{children:[o(v,{"data-testid":"add-provider-button",variant:"primary",type:"submit",children:r("save")}),o(v,{onClick:()=>i?.(),variant:"link",children:r("cancel")})]})]})})};function ur(){const{t}=y(),i=P(),a=K();return p(I,{children:[o(x,{titleKey:t("editProvider"),subKey:i.providerType}),o(C,{variant:"light",children:o(D,{...i,onClose:()=>a(E({realm:i.realm,tab:"providers"}))})})]})}export{D as KeyProviderForm,ur as default};
//# sourceMappingURL=KeyProviderForm-pYX6GTEY.js.map
