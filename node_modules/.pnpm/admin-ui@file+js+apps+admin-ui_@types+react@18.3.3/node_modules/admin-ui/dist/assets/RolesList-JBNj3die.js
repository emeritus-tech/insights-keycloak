import{jsxs as h,Fragment as D,jsx as t}from"react/jsx-runtime";import{u as w,a as L,d as F,f as v,c as C,B as x,l as y,j as k,L as p,bK as E,aC as g,b3 as I,c8 as N,ad as T}from"./main-DXDh8SEc.js";import{useState as V}from"react";import{u as j}from"./ConfirmDialog-o8TAA2Kj.js";import{L as B}from"./PaginatingTableToolbar-zbU1l_6-.js";import{K as P}from"./KeycloakDataTable-B3eTS_qk.js";const $=({defaultRoleName:c,toDetail:m,messageBundle:l,...a})=>{const{t:n}=L(l),{realm:d}=C(),{hasAccess:s,hasSomeAccess:i}=I(),e=s("view-realm")&&i("view-clients","manage-clients");return a.name!==c?t(p,{to:m(a.id),children:a.name}):h(D,{children:[e?t(p,{to:N({realm:d,tab:"user-registration"}),children:a.name}):t("span",{children:a.name}),t(T,{helpText:n(`${l}:defaultRole`),fieldLabelId:"defaultRole"})]})},M=({loader:c,paginated:m=!0,parentRoleId:l,messageBundle:a="roles",toCreate:n,toDetail:d,isReadOnly:s})=>{const{adminClient:i}=w(),{t:e}=L(),K=F(),{addAlert:f,addError:A}=v(),{realmRepresentation:u}=C(),[r,R]=V(),[b,S]=j({titleKey:"roleDeleteConfirm",messageKey:e("roleDeleteConfirmDialog",{selectedRoleName:r?r.name:""}),continueButtonLabel:"delete",continueButtonVariant:x.danger,onConfirm:async()=>{try{l?await i.roles.delCompositeRoles({id:l},[r]):await i.roles.delById({id:r.id}),R(void 0),f(e("roleDeletedSuccess"),y.success)}catch(o){A("roleDeleteError",o)}}});return h(D,{children:[t(S,{}),t(P,{loader:c,ariaLabelKey:"roleList",searchPlaceholderKey:"searchForRoles",isPaginated:m,toolbarItem:!s&&t(k,{"data-testid":"create-role",component:o=>t(p,{...o,to:n}),children:e("createRole")}),actions:s?[]:[{title:e("delete"),onRowClick:o=>{R(o),u?.defaultRole&&o.name===u.defaultRole.name?f(e("defaultRoleDeleteError"),y.danger):b()}}],columns:[{name:"name",displayKey:"roleName",cellRenderer:o=>t($,{...o,defaultRoleName:u?.defaultRole?.name,toDetail:d,messageBundle:a})},{name:"composite",displayKey:"composite",cellFormatters:[E(),g()]},{name:"description",displayKey:"description",cellFormatters:[g()]}],emptyState:t(B,{hasIcon:!0,message:e(`noRoles-${a}`),instructions:s?"":e(`noRolesInstructions-${a}`),primaryActionText:s?"":e("createRole"),onPrimaryAction:()=>K(n)})},r?r.id:"roleList")]})};export{M as R};
//# sourceMappingURL=RolesList-JBNj3die.js.map
