import{jsxs as h,jsx as t,Fragment as V}from"react/jsx-runtime";import{useState as s,useMemo as k,useEffect as $}from"react";import{a as R,b as B,v as E,x as A,M as N,r as J,aa as W,Z as I,$ as Z,j as x,B as _,J as q,K as z,N as G,D as K,L as H}from"./main-DXDh8SEc.js";import{L as F}from"./PaginatingTableToolbar-zbU1l_6-.js";import{K as O}from"./KeycloakDataTable-B3eTS_qk.js";import{d as Q,D as P,a as w,b as v,c as T}from"./DataListItemRow-CavOLjhh.js";const U=a=>{const{t:o}=R(),c=B(),M=a.protocol,n=c.protocolMapperTypes[M],y=c.builtinProtocolMappers[M],[f,d]=s([]),[u,D]=s([]),C=E(),p=k(()=>C(y,A("name")).map(e=>{const r=n.filter(l=>l.id===e.protocolMapper)[0];return{item:e,id:e.name,description:r.helpText}}),[y,n]),[g,S]=s(p);if(a.filter&&a.filter.length!==f.length){d(a.filter);const e=a.filter.map(r=>r.name);S([...p.filter(r=>!e.includes(r.item.name))])}const L=k(()=>C(n,A("name")),[n]),i=!!a.filter,b=[o("name"),o("description")];return h(N,{"aria-label":o(i?"addPredefinedMappers":"emptySecondaryAction"),variant:J.medium,header:h(W,{role:"dialog","aria-label":o(i?"addPredefinedMappers":"emptySecondaryAction"),children:[t(I,{component:Z.h1,children:o(i?"addPredefinedMappers":"emptySecondaryAction")}),t(I,{children:o(i?"predefinedMappingDescription":"configureMappingDescription")})]}),isOpen:a.open,onClose:a.toggleDialog,actions:i?[t(x,{id:"modal-confirm","data-testid":"confirm",isDisabled:g.length===0||u.length===0,onClick:()=>{a.onConfirm(u.map(({item:e})=>e)),a.toggleDialog()},children:o("add")},"confirm"),t(x,{id:"modal-cancel","data-testid":"cancel",variant:_.link,onClick:()=>{a.toggleDialog()},children:o("cancel")},"cancel")]:[],children:[!i&&h(Q,{onSelectDataListItem:(e,r)=>{const l=n.find(m=>m.id===r);a.onConfirm(l),a.toggleDialog()},"aria-label":o("addPredefinedMappers"),isCompact:!0,children:[t(P,{"aria-label":o("headerName"),id:"header",children:t(w,{children:t(v,{dataListCells:b.map(e=>t(T,{style:{fontWeight:700},children:e},e))})})}),L.map(e=>t(P,{"aria-label":e.name,id:e.id,children:t(w,{children:t(v,{dataListCells:[t(T,{children:e.name},`name-${e.id}`),t(T,{children:e.helpText},`helpText-${e.id}`)]})})},e.id))]}),i&&t(O,{loader:g,onSelect:D,canSelectAll:!0,ariaLabelKey:"addPredefinedMappers",searchPlaceholderKey:"searchForMapper",columns:[{name:"id",displayKey:"name"},{name:"description",displayKey:"description"}],emptyState:t(F,{message:o("emptyMappers"),instructions:o("emptyBuiltInMappersInstructions")})})]})},X=({id:a,name:o,detailLink:c})=>t(H,{to:c(a),children:o}),ie=({model:a,onAdd:o,onDelete:c,detailLink:M})=>{const{t:n}=R(),[y,f]=s(!1),d=a.protocolMappers,u=B().protocolMapperTypes[a.protocol],[D,C]=s(0);$(()=>C(D+1),[d]);const[p,g]=s(!1),[S,L]=s(a.protocolMappers),i=e=>{L(e?d||[]:void 0),g(!p)},b=async()=>d?d.reduce((r,l)=>{const m=u.find(({id:j})=>j===l.protocolMapper);return m?r.concat({...l,category:m.category,type:m.name,priority:m.priority}):r},[]).sort((r,l)=>r.priority-l.priority):[];return h(V,{children:[t(U,{protocol:a.protocol,filter:S,onConfirm:o,open:p,toggleDialog:()=>g(!p)}),t(O,{loader:b,ariaLabelKey:"clientScopeList",searchPlaceholderKey:"searchForMapper",toolbarItem:t(q,{onSelect:()=>f(!1),onOpenChange:e=>f(e),toggle:e=>t(z,{ref:e,variant:"primary",id:"mapperAction",onClick:()=>f(!y),children:n("addMapper")}),isOpen:y,children:h(G,{children:[t(K,{onClick:()=>i(!0),children:n("fromPredefinedMapper")}),t(K,{onClick:()=>i(!1),children:n("byConfiguration")})]})}),actions:[{title:n("delete"),onRowClick:c}],columns:[{name:"name",cellRenderer:e=>t(X,{...e,detailLink:M})},{name:"category"},{name:"type"},{name:"priority"}],emptyState:t(F,{message:n("emptyMappers"),instructions:n("emptyMappersInstructions"),secondaryActions:[{text:n("emptyPrimaryAction"),onClick:()=>i(!0)},{text:n("emptySecondaryAction"),onClick:()=>i(!1)}]})},D)]})};export{ie as M};
//# sourceMappingURL=MapperList-D-E46ujn.js.map
