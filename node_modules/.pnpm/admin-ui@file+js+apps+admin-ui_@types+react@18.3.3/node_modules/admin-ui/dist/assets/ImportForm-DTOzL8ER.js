import{jsxs as i,Fragment as F,jsx as r}from"react/jsx-runtime";import{u as v,a as y,d as b,c as w,g as S,f as A,P as x,F as T,y as j,A as E,i as I,j as V,L as P,aQ as k,Q as L,a6 as O,a7 as H,a8 as N,S as U,l as $,aR as z}from"./main-DXDh8SEc.js";import{useState as D}from"react";import{F as K}from"./FormAccess-Bcw0IOUQ.js";import{F as Q}from"./FileUploadForm-DD1wLZX_.js";import{V as R}from"./ViewHeader-DTd0a4sz.js";import{C as W,a as B}from"./ClientDescription-R2Yp06AR.js";import{L as G}from"./CodeEditor-BFrRAdAy.js";import"react-dom";import"./copy-icon-C4kUIpk5.js";import"./FileUpload-CK_LBb0x.js";import"./SwitchControl-BOCtuOhh.js";import"./EmptyStateFooter-C_ktbNPy.js";import"./EmptyStateActions-CiPKPOdJ.js";const J=a=>a.match(/(<.[^(><.)]+>)/g);function ce(){const{adminClient:a}=v(),{t:s}=y(),c=b(),{realm:o}=w(),n=S(),{handleSubmit:m,setValue:p,formState:d}=n,[u,h]=D({}),{addAlert:g,addError:l}=A(),f=async t=>{try{const e=await C(t);L(e,p),h(e)}catch(e){l("importParseError",e)}};async function C(t){if(!J(t))return JSON.parse(t);const e=await O(`${N(a.baseUrl)}admin/realms/${o}/client-description-converter`,{method:"POST",body:t,headers:H(await a.getAccessToken())});if(!e.ok)throw new Error(`Server responded with invalid status: ${e.statusText}`);return e.json()}return i(F,{children:[r(R,{titleKey:"importClient",subKey:"clientsExplain"}),r(x,{variant:"light",children:r(K,{isHorizontal:!0,onSubmit:m(async t=>{try{const e=await a.clients.create({...u,...U({...t,attributes:t.attributes||{}})});g(s("clientImportSuccess"),$.success),c(z({realm:o,clientId:e.id,tab:"settings"}))}catch(e){l("clientImportError",e)}}),role:"manage-clients",children:i(T,{...n,children:[r(Q,{id:"realm-file",language:G.json,extension:".json,.xml",helpText:s("helpFileUploadClient"),onChange:f}),r(W,{hasConfigureAccess:!0}),r(j,{name:"protocol",label:s("type"),readOnly:!0}),r(B,{unWrap:!0}),i(E,{children:[r(I,{formState:d,allowInvalid:!0,allowNonDirty:!0,children:s("save")}),r(V,{variant:"link",component:t=>r(P,{...t,to:k({realm:o})}),children:s("cancel")})]})]})})})]})}export{ce as default};
//# sourceMappingURL=ImportForm-DTOzL8ER.js.map
