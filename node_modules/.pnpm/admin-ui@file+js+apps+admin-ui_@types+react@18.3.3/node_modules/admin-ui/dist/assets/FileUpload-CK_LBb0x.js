import{jsxs as A,jsx as l}from"react/jsx-runtime";import{f as p,u as j,a as E}from"./CodeEditor-BFrRAdAy.js";import{n as G,bb as V,bc as O,am as H,j as $,B as z,aZ as K,d3 as Z,cr as q,d4 as J}from"./main-DXDh8SEc.js";var f=(a=>(a.text="text",a.dataURL="dataURL",a))(f||{});function M(a,n){return new Promise((d,o)=>{const i=new FileReader;switch(i.onload=()=>d(i.result),i.onerror=()=>o(i.error),n){case"text":i.readAsText(a);break;case"dataURL":i.readAsDataURL(a);break;default:o("unknown type")}})}const P=({id:a,type:n,value:d="",filename:o="",onChange:i,onBrowseButtonClick:s,onClearButtonClick:U,onTextAreaClick:D,onTextChange:h,className:F="",isDisabled:u=!1,isReadOnly:B=!1,isLoading:R=!1,spinnerAriaValueText:k,isRequired:m=!1,isDragActive:g=!1,validated:x="default","aria-label":C="File upload",filenamePlaceholder:v="Drag a file here or browse to upload",filenameAriaLabel:I=o?"Read only filename":v,browseButtonText:N="Browse...",clearButtonText:y="Clear",isClearButtonDisabled:L=!o&&!d,containerRef:b=null,allowEditingUploadedText:S=!1,hideDefaultPreview:w=!1,children:T=null,...e})=>{const r=(t,c)=>{i?.(t,o,c),h?.(t)};return A("div",{className:G(p.fileUpload,g&&p.modifiers.dragHover,R&&p.modifiers.loading,F),ref:b,...e,children:[l("div",{className:p.fileUploadFileSelect,children:A(V,{children:[l(O,{isFill:!0,children:l(H,{isDisabled:u,id:`${a}-filename`,name:`${a}-filename`,"aria-label":I,placeholder:v,"aria-describedby":`${a}-browse-button`,value:o,readOnlyVariant:"default"})}),l(O,{children:l($,{id:`${a}-browse-button`,variant:z.control,onClick:s,isDisabled:u,children:N})}),l(O,{children:l($,{variant:z.control,isDisabled:u||L,onClick:U,children:y})})]})}),A("div",{className:p.fileUploadFileDetails,children:[!w&&n===f.text&&l(K,{readOnly:B||!!o&&!S,disabled:u,isRequired:m,resizeOrientation:Z.vertical,validated:x,id:a,name:a,"aria-label":C,value:d,onChange:(t,c)=>r(c,t),onClick:D}),R&&l("div",{className:p.fileUploadFileDetailsSpinner,children:l(q,{size:J.lg,"aria-valuetext":k})})]}),T]})};P.displayName="FileUploadField";const Q=({id:a,type:n,value:d=n===f.text||n===f.dataURL?"":void 0,filename:o="",children:i=null,onChange:s,onFileInputChange:U,onReadStarted:D,onReadFinished:h,onReadFailed:F,onClearClick:u,onClick:B=x=>x.preventDefault(),onTextChange:R,onDataChange:k,dropzoneProps:m={},...g})=>{const x=(e,r)=>{if(e.length>0){const t=e[0];r?.type==="drop"&&U?.(r,t),n===f.text||n===f.dataURL?(s?.("",t.name,r),D?.(t),M(t,n).then(c=>{h?.(t),s?.(c,t.name,r),k?.(c)}).catch(c=>{F?.(c,t),h?.(t),s?.("","",r),k?.("")})):s?.(t,t.name,r)}m.onDropAccepted?.(e,r)},C=(e,r)=>{e.length>0&&s?.("",e[0].file.name,r),m.onDropRejected?.(e,r)},v=e=>{s?.("","",e),u?.(e),S("")},{getRootProps:I,getInputProps:N,isDragActive:y,open:L,inputRef:b}=j({multiple:!1,...m,onDropAccepted:x,onDropRejected:C}),S=e=>{b.current&&(b.current.value=e)},w=N(),T={...w,onChange:async e=>{w.onChange?.(e);const r=await E(e.nativeEvent);r.length===1&&U?.(e,r[0])}};return A(P,{...I({...g,refKey:"containerRef",onClick:e=>e.preventDefault()}),tabIndex:void 0,id:a,type:n,filename:o,value:d,onChange:s,isDragActive:y,onBrowseButtonClick:L,onClearButtonClick:v,onTextAreaClick:B,onTextChange:R,onClick:e=>e.stopPropagation(),children:[l("input",{...T,ref:b}),i]})};Q.displayName="FileUpload";export{Q as F};
//# sourceMappingURL=FileUpload-CK_LBb0x.js.map
